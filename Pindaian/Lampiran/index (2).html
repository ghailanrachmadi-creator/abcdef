<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentine Cover â€¢ Cute Kawaii (BTS around box)</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Fredoka:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --ink:#4a1630;
      --glass: rgba(255,255,255,.66);
      --shadow: 0 18px 55px rgba(0,0,0,.16);

      --pinkPastel1:#ffd6ea;
      --pinkPastel2:#ffc2e0;
      --pinkPastel3:#fff0f7;

      --pink:#ff5aa5;
      --yellow:#ffd24a;
      --red:#ff3b55;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family:"Fredoka", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      overflow:hidden;

      background:
        radial-gradient(1100px 650px at 35% 18%, rgba(255,255,255,.78), transparent 62%),
        radial-gradient(980px 560px at 78% 34%, rgba(255,255,255,.62), transparent 62%),
        radial-gradient(900px 520px at 25% 80%, rgba(255,210,74,.12), transparent 60%),
        linear-gradient(180deg, var(--pinkPastel3) 0%, var(--pinkPastel1) 55%, var(--pinkPastel2) 100%);
    }

    /* watercolor paper texture */
    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      z-index:0;
      opacity:.20;
      background:
        radial-gradient(24px 24px at 10% 20%, rgba(255,255,255,.20), transparent 70%),
        radial-gradient(34px 34px at 82% 18%, rgba(255,255,255,.18), transparent 70%),
        radial-gradient(26px 26px at 70% 78%, rgba(255,255,255,.16), transparent 70%),
        radial-gradient(30px 30px at 22% 74%, rgba(255,255,255,.14), transparent 70%),
        repeating-linear-gradient(0deg, rgba(255,255,255,.06) 0, rgba(255,255,255,.06) 1px, transparent 1px, transparent 7px),
        repeating-linear-gradient(90deg, rgba(0,0,0,.015) 0, rgba(0,0,0,.015) 1px, transparent 1px, transparent 9px);
      mix-blend-mode: overlay;
      filter: blur(.35px);
    }

    /* kawaii confetti dots */
    body::after{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      z-index:0;
      opacity:.12;
      background:
        radial-gradient(3px 3px at 12% 22%, rgba(255,90,165,.9), transparent 60%),
        radial-gradient(3px 3px at 18% 64%, rgba(255,210,74,.9), transparent 60%),
        radial-gradient(2px 2px at 30% 78%, rgba(255,255,255,.9), transparent 60%),
        radial-gradient(3px 3px at 44% 18%, rgba(255,210,74,.9), transparent 60%),
        radial-gradient(2px 2px at 56% 26%, rgba(255,255,255,.9), transparent 60%),
        radial-gradient(3px 3px at 70% 72%, rgba(255,90,165,.9), transparent 60%),
        radial-gradient(2px 2px at 82% 44%, rgba(255,255,255,.9), transparent 60%),
        radial-gradient(3px 3px at 90% 60%, rgba(255,210,74,.9), transparent 60%);
      animation: confettiFloat 6s ease-in-out infinite alternate;
    }
    @keyframes confettiFloat{ from{ transform: translateY(0); } to{ transform: translateY(-10px); } }

    /* sparkle */
    .sparkle{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:1;
      opacity:.16;
      background:
        radial-gradient(2px 2px at 12% 20%, #fff, transparent 60%),
        radial-gradient(2px 2px at 30% 72%, #fff, transparent 60%),
        radial-gradient(2px 2px at 65% 35%, #fff, transparent 60%),
        radial-gradient(2px 2px at 85% 55%, #fff, transparent 60%),
        radial-gradient(2px 2px at 45% 15%, #fff, transparent 60%),
        radial-gradient(2px 2px at 55% 82%, #fff, transparent 60%);
      filter: blur(.2px);
      animation: twinkle 3.2s ease-in-out infinite alternate;
    }
    @keyframes twinkle{ from{ opacity:.10; transform:translateY(0); } to{ opacity:.20; transform:translateY(-6px); } }

    /* side vines */
    .side-deco{
      position:fixed; top:-2vh; bottom:-2vh;
      width: min(150px, 19vw);
      z-index: 2;
      pointer-events:none;
      opacity:.85;
      filter: drop-shadow(0 16px 20px rgba(0,0,0,.10));
    }
    .side-deco.left{ left:-10px; }
    .side-deco.right{ right:-10px; transform: scaleX(-1); }

    /* balloon top */
    .balloon-top{
      position:fixed;
      top: 10px; left: 50%;
      transform: translateX(-50%);
      width: min(980px, 96vw);
      z-index: 3;
      pointer-events:none;
      filter: drop-shadow(0 16px 25px rgba(0,0,0,.12));
      animation: floatTop 5.2s ease-in-out infinite alternate;
    }
    @keyframes floatTop{
      from{ transform: translateX(-50%) translateY(0); }
      to{ transform: translateX(-50%) translateY(6px); }
    }
    .balloon-top svg{ width:100%; height:auto; display:block; }

    /* center layout */
    .center{
      position:fixed; inset:0;
      display:grid; place-items:center;
      padding: 18vh 18px 22vh;
      z-index:5;
    }

    /* Bigger wrap so BTS can surround the card */
    .card-wrap{
      position:relative;
      width:min(820px, 94vw);
      max-width: 820px;
      padding: 86px 84px; /* ruang buat BTS mengelilingi */
    }
    @media (max-width:640px){
      .card-wrap{ padding: 74px 22px; }
    }

    .card{
      border-radius: 28px;
      background: var(--glass);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.70);
      backdrop-filter: blur(14px);
      padding: 26px 22px 22px;
      position:relative;
      overflow:hidden;
      isolation:isolate;
      z-index: 3; /* di atas BTS */
    }
    .card:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(740px 300px at 50% 0%, rgba(255,255,255,.70), transparent 62%),
        radial-gradient(420px 240px at 15% 85%, rgba(255,210,74,.18), transparent 60%),
        radial-gradient(420px 240px at 85% 85%, rgba(255,90,165,.16), transparent 60%);
      opacity:.85;
      pointer-events:none;
      z-index:-1;
    }
    .card:after{
      content:"";
      position:absolute; inset:0;
      pointer-events:none;
      background:
        radial-gradient(12px 12px at 22% 22%, rgba(255,255,255,.22), transparent 70%),
        radial-gradient(16px 16px at 72% 30%, rgba(255,255,255,.18), transparent 70%),
        radial-gradient(14px 14px at 40% 78%, rgba(255,255,255,.16), transparent 70%);
      opacity:.9;
      mix-blend-mode: soft-light;
    }

    h1{
      margin:0 0 12px;
      font-family:"Pacifico", cursive;
      font-weight:400;
      font-size:clamp(30px, 4.2vw, 56px);
      text-align:center;
      color:#7a1042;
      text-shadow:0 4px 0 rgba(255,255,255,.65);
      position:relative;
      z-index:1;
    }
    .hb{
      display:inline-block;
      transform-origin: 50% 65%;
      animation: heartbeat2 1.35s ease-in-out infinite;
      filter:
        drop-shadow(0 10px 16px rgba(255,90,165,.22))
        drop-shadow(0 0 18px rgba(255,90,165,.18));
    }
    @keyframes heartbeat2{
      0%{ transform: scale(1); }
      10%{ transform: scale(1.18); }
      18%{ transform: scale(1.02); }
      28%{ transform: scale(1.24); }
      38%{ transform: scale(1.00); }
      100%{ transform: scale(1.00); }
    }

    .subtitle{
      margin:0 0 18px;
      text-align:center;
      font-weight:900;
      color: rgba(74,22,48,.78);
      position:relative; z-index:1;
    }

    .btn-row{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
      position:relative;
      z-index:1;
      margin-top: 10px;
    }
    .clickbox{
      display:flex;
      align-items:center;
      justify-content:center;
      height: 86px;
      border-radius: 18px;
      text-decoration:none;
      font-weight: 1000;
      letter-spacing:.3px;
      color:var(--ink);
      background: linear-gradient(180deg, rgba(255,255,255,.90), rgba(255,255,255,.52));
      border: 1px solid rgba(255,255,255,.75);
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
      position:relative;
      overflow:hidden;
      user-select:none;
    }
    .clickbox:before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(220px 90px at 25% 30%, rgba(255,210,74,.30), transparent 70%),
        radial-gradient(260px 110px at 78% 78%, rgba(255,90,165,.26), transparent 70%);
      opacity:.75;
    }
    .clickbox span{ position:relative; z-index:1; font-size:18px; text-align:center; padding:0 12px; }
    .clickbox:hover{ transform: translateY(-2px) scale(1.01); box-shadow: 0 16px 30px rgba(0,0,0,.12); filter: saturate(1.06); }
    .clickbox:active{ transform: translateY(1px) scale(.99); }

    /* ===== BTS AROUND THE CARD (no framing) ===== */
    .bts-ring{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index:4; /* di bawah card (card z=3) */
    }
    .bts{
      position:absolute;
      width: clamp(78px, 12vw, 130px);
      height:auto;
      transform-origin: 50% 70%;
      filter:
        drop-shadow(0 14px 18px rgba(0,0,0,.20))
        saturate(1.03) contrast(1.02);
      opacity:.98;
    }

    /* posisi: 7 mengelilingi */
    .bts.p1{ left: 12%; top: 6%;   transform: translate(-50%,-50%) rotate(-6deg); }
    .bts.p2{ left: 50%; top: 1%;   transform: translate(-50%,-50%) rotate(3deg);  width: clamp(86px, 13vw, 148px); }
    .bts.p3{ right: 12%; top: 8%;  transform: translate(50%,-50%)  rotate(8deg);  }

    .bts.p4{ left: 4%;  top: 50%;  transform: translate(-50%,-50%) rotate(-10deg); width: clamp(74px, 11vw, 120px); }
    .bts.p5{ right: 4%; top: 50%;  transform: translate(50%,-50%)  rotate(10deg);  width: clamp(74px, 11vw, 120px); }

    .bts.p6{ left: 18%; bottom: 2%; transform: translate(-50%,50%) rotate(-6deg); width: clamp(86px, 13vw, 150px); }
    .bts.p7{ right:18%; bottom: 2%; transform: translate(50%,50%)  rotate(6deg);  width: clamp(86px, 13vw, 150px); }

    /* di HP biar gak nutup card */
    @media (max-width:520px){
      .bts{ width: 82px; }
      .bts.p4,.bts.p5{ width: 70px; }
      .bts.p6,.bts.p7{ width: 92px; bottom: 6%; }
      .card-wrap{ padding: 70px 14px; }
    }

    /* ===== Orbit butterflies around the card ===== */
    .card-orbit{
      position:absolute;
      left:50%; top:50%;
      width: calc(100% + 240px);
      height: calc(100% + 240px);
      transform: translate(-50%,-50%);
      pointer-events:none;
      z-index: 1; /* paling belakang */
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.12));
      opacity:.95;
    }
    .orbit-ring{ position:absolute; inset:0; animation: ringRotate var(--ringDur, 16s) linear infinite; }
    .orbit-ring.back{ opacity:.58; filter: blur(.2px); }
    .orbit-ring.front{ opacity:.82; }
    @keyframes ringRotate{ from{ transform: rotate(0deg); } to{ transform: rotate(360deg); } }

    .butterfly{
      position:absolute;
      left:50%; top:50%;
      width: var(--bs, 42px);
      height: var(--bs, 42px);
      transform:
        rotate(var(--a))
        translateX(var(--r))
        rotate(calc(-1 * var(--a)))
        rotate(var(--tw));
    }
    .butterfly .wing{
      width:100%; height:100%;
      animation: flap var(--flap, 1.0s) ease-in-out infinite alternate;
      transform-origin: 50% 50%;
    }
    @keyframes flap{
      from{ transform: scale(0.98) rotate(-1deg); filter:saturate(1); }
      to  { transform: scale(1.04) rotate(1deg); filter:saturate(1.10); }
    }

    /* ===== GARDEN ===== */
    .garden{
      position:fixed;
      left:0; right:0;
      bottom: -12vh;
      height: 46vh;
      z-index:3;
      pointer-events:none;
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.14));
    }
    .garden::before{
      content:"";
      position:absolute; left:0; right:0; top:-14vh;
      height: 18vh;
      background: linear-gradient(180deg,
        rgba(255,240,247,0),
        rgba(255,240,247,.55),
        rgba(255,240,247,0)
      );
      opacity:.95;
      pointer-events:none;
    }
    .ground{
      position:absolute; left:0; right:0; bottom:0;
      height: 64%;
      background:
        radial-gradient(1200px 260px at 50% 20%, rgba(255,255,255,.22), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.12), rgba(0,0,0,.06));
      border-top-left-radius: 44px;
      border-top-right-radius: 44px;
      opacity:.98;
    }
    .rosefield{
      position:absolute;
      left:-6vw; right:-6vw; bottom:0;
      height: 100%;
      overflow:hidden;
    }
    @keyframes sway{
      0%{ transform: translate3d(0,0,0) rotate(var(--r)) rotate(-2deg); }
      50%{ transform: translate3d(0,-6px,0) rotate(var(--r)) rotate(2deg); }
      100%{ transform: translate3d(0,0,0) rotate(var(--r)) rotate(-2deg); }
    }
    .rose{
      position:absolute;
      width: var(--w, 90px);
      height: var(--w, 90px);
      background: url("mawarm.png") center/cover no-repeat;
      border-radius: 999px;
      opacity: .98;
      animation: sway var(--sw, 4.8s) ease-in-out infinite;
      animation-delay: var(--sd, 0s);
      will-change: transform;
    }

    /* ===== Bottom controls: left/right ===== */
    .dock{
      position:fixed;
      left: 14px;
      right: 14px;
      bottom: calc(14px + env(safe-area-inset-bottom));
      z-index: 9999;
      display:flex;
      justify-content:space-between;
      gap: 12px;
      pointer-events:none; /* biar only tombol yg clickable */
    }
    .dock > *{ pointer-events:auto; }

    .pill-btn{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.65);
      background: linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.45));
      box-shadow: 0 14px 28px rgba(0,0,0,.14);
      color: var(--ink);
      font-weight: 900;
      cursor: pointer;
      user-select: none;
      backdrop-filter: blur(10px);
      -webkit-tap-highlight-color: transparent;
      text-decoration:none;
      white-space:nowrap;
    }
    .dot{
      width: 10px; height: 10px;
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255,210,74,.95), rgba(255,90,165,.90));
      box-shadow: 0 10px 18px rgba(0,0,0,.12);
    }

    /* Error toast (buat BTS image missing) */
    .img-err{
      position:fixed;
      left:12px;
      top:12px;
      z-index:9999;
      font-size:12px;
      padding:10px 12px;
      border-radius:14px;
      background: rgba(0,0,0,.55);
      color:#fff;
      display:none;
      max-width: min(92vw, 520px);
      word-break: break-all;
    }
    .img-err.show{ display:block; }
  </style>
</head>

<body>
  <div class="sparkle"></div>

  <!-- side vine ornaments -->
  <div class="side-deco left" aria-hidden="true"></div>
  <div class="side-deco right" aria-hidden="true"></div>

  <!-- heart balloon garland top -->
  <div class="balloon-top" aria-hidden="true">
    <svg viewBox="0 0 1200 220" role="img" aria-label="Heart balloons">
      <defs>
        <linearGradient id="shine" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stop-color="rgba(255,255,255,.65)"/>
          <stop offset="1" stop-color="rgba(255,255,255,0)"/>
        </linearGradient>
        <g id="heartBalloon">
          <path d="M0,-14 C0,-30 18,-38 30,-28 C42,-38 60,-30 60,-14 C60,8 30,26 30,26 C30,26 0,8 0,-14Z"
                fill="currentColor" opacity=".98"/>
          <path d="M10,-20 C18,-30 30,-26 30,-18"
                stroke="url(#shine)" stroke-width="6" stroke-linecap="round" opacity=".65"/>
          <path d="M26,26 L34,26 L30,34 Z" fill="rgba(74,22,48,.20)"/>
          <path d="M30,34 C28,68 38,92 28,120"
                stroke="rgba(74,22,48,.34)" stroke-width="2.2" fill="none"/>
        </g>
      </defs>

      <path d="M60,92 C220,30 420,48 600,72 C760,94 970,40 1140,88"
            stroke="rgba(74,22,48,.16)" stroke-width="4" fill="none" stroke-linecap="round"/>

      <g>
        <g transform="translate(90  70) rotate(-8)"><use href="#heartBalloon" style="color:var(--yellow)"/></g>
        <g transform="translate(190 82) rotate(6)"><use href="#heartBalloon" style="color:var(--pink)"/></g>
        <g transform="translate(290 62) rotate(-2)"><use href="#heartBalloon" style="color:var(--red)"/></g>
        <g transform="translate(395 78) rotate(10)"><use href="#heartBalloon" style="color:var(--yellow)"/></g>
        <g transform="translate(505 58) rotate(-6)"><use href="#heartBalloon" style="color:var(--pink)"/></g>
        <g transform="translate(615 80) rotate(4)"><use href="#heartBalloon" style="color:var(--red)"/></g>
        <g transform="translate(725 60) rotate(-1)"><use href="#heartBalloon" style="color:var(--yellow)"/></g>
        <g transform="translate(835 82) rotate(8)"><use href="#heartBalloon" style="color:var(--pink)"/></g>
        <g transform="translate(945 64) rotate(-7)"><use href="#heartBalloon" style="color:var(--red)"/></g>
        <g transform="translate(1055 78) rotate(6)"><use href="#heartBalloon" style="color:var(--yellow)"/></g>
      </g>
    </svg>
  </div>

  <!-- Center -->
  <div class="center">
    <div class="card-wrap" id="cardWrap">

      <!-- orbit butterflies (lebih belakang) -->
      <div class="card-orbit" aria-hidden="true">
        <div class="orbit-ring back" id="orbitBack"></div>
        <div class="orbit-ring front" id="orbitFront"></div>
      </div>

      <!-- BTS ring (mengelilingi box) -->
      <div class="bts-ring" aria-hidden="true" id="btsRing">
        <!-- mapping: bts1..bts7 (sesuai file kamu) -->
        <img class="bts p1" src="./bts7.png" alt="RM">
        <img class="bts p2" src="./bts6.png" alt="Jin">
        <img class="bts p3" src="./bts1.png" alt="SUGA">
        <img class="bts p4" src="./bts2.png" alt="j-hope">
        <img class="bts p5" src="./bts3.png" alt="Jimin">
        <img class="bts p6" src="./bts4.png" alt="V">
        <img class="bts p7" src="./bts5.png" alt="Jungkook">
      </div>

      <div class="card" role="region" aria-label="Valentine cover">
        <h1>
          Happy Valentineâ€™s,
          <span class="hb">ðŸ’–</span>
        </h1>
        <p class="subtitle">ITS HEREEE</p>

        <div class="btn-row">
          <!-- halaman 2 dihapus -->
          <a class="clickbox" href="page1.html"><span>HMM BUAT ORANG SIBUK CLICK HERE YAA</span></a>
        </div>
      </div>
    </div>
  </div>

  <!-- Garden bottom -->
  <div class="garden" aria-hidden="true">
    <div class="ground"></div>
    <div class="rosefield" id="rosefield"></div>
  </div>

  <!-- Music -->
  <audio id="bgm" preload="auto" loop playsinline>
    <source src="./lagu1.mp3" type="audio/mpeg">
    <source src="./lagu1.ogg" type="audio/ogg">
  </audio>

  <!-- Bottom dock: kiri mini game, kanan music -->
  <div class="dock" aria-label="Bottom controls">
    <a class="pill-btn" href="minigame.html" aria-label="Mini game">
      <span class="dot"></span> ðŸ§© Mini Game
    </a>

    <button class="pill-btn" id="musicBtn" type="button" aria-label="Toggle music">
      <span class="dot"></span>
      <span id="musicLabel">Play ðŸŽµ</span>
    </button>
  </div>

  <div class="img-err" id="imgErr"></div>

  <script>
    // ===== Side vine SVG =====
    function vineSVG(){
      return `
        <svg viewBox="0 0 140 900" preserveAspectRatio="none" aria-hidden="true">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="rgba(255,210,74,.30)"/>
              <stop offset="1" stop-color="rgba(255,90,165,.28)"/>
            </linearGradient>
          </defs>

          <path d="M80,0 C40,110 120,180 70,270 C20,360 110,430 70,520 C30,600 120,690 68,780 C30,850 90,890 86,900"
                stroke="rgba(74,22,48,.20)" stroke-width="6" fill="none" stroke-linecap="round"/>

          ${Array.from({length:19}).map((_,i)=>{
            const y = 34 + i*46;
            const x = (i%2===0) ? 56 : 86;
            const s = (i%3===0) ? 1.10 : 0.98;
            const rot = (i%2===0) ? -14 : 14;
            return `
              <g transform="translate(${x} ${y}) scale(${s}) rotate(${rot})">
                <path d="M0,0 C-18,-8 -22,18 -8,24 C8,32 22,16 14,2 C10,-6 5,-1 0,0Z"
                      fill="url(#g)" opacity=".92"/>
                <path d="M-6,8 C-2,2 6,0 12,4"
                      stroke="rgba(255,255,255,.28)" stroke-width="3" stroke-linecap="round" opacity=".7"/>
              </g>
            `;
          }).join("")}

          ${Array.from({length:10}).map((_,i)=>{
            const y = 70 + i*78;
            const x = (i%2===0) ? 36 : 104;
            return `<text x="${x}" y="${y}" font-size="18" opacity=".18">â™¡</text>`;
          }).join("")}
        </svg>
      `;
    }
    document.querySelector(".side-deco.left").innerHTML = vineSVG();
    document.querySelector(".side-deco.right").innerHTML = vineSVG();

    // ===== Dense rose garden =====
    const rosefield = document.getElementById("rosefield");
    function buildRoses(){
      rosefield.innerHTML = "";
      const w = window.innerWidth;
      const h = Math.max(300, window.innerHeight * 0.46);
      const layers = 7;

      for(let layer=0; layer<layers; layer++){
        const count = Math.round((w / 38) * (1.45 + layer*0.16));
        for(let i=0;i<count;i++){
          const r = document.createElement("div");
          r.className = "rose";

          const size = 50 + Math.random()*88 + layer*10;
          const x = (i/count)*w + (Math.random()*48 - 24);

          const layerLift = layer * 36;
          const yBase = (h * 0.40) - layerLift - (Math.random()*22);
          const y = yBase + (Math.random()*18);

          r.style.setProperty("--w", size.toFixed(0)+"px");
          r.style.left = (x - size/2) + "px";
          r.style.bottom = (Math.max(0, y - size/2)).toFixed(0) + "px";

          const rot = (Math.random()*26 - 13);
          r.style.setProperty("--r", rot.toFixed(1) + "deg");
          r.style.opacity = (0.86 + Math.random()*0.14).toFixed(2);

          const blur = (layers-1-layer) * 0.20;
          r.style.filter = `saturate(1.12) drop-shadow(0 12px 18px rgba(0,0,0,.14)) blur(${blur}px)`;

          r.style.setProperty("--sw", (3.8 + Math.random()*2.8).toFixed(2) + "s");
          r.style.setProperty("--sd", (-Math.random()*4).toFixed(2) + "s");

          rosefield.appendChild(r);
        }
      }
    }

    // ===== Orbit butterflies =====
    function butterflySVG(c1, c2, uid){
      const gid = `g_${uid}`;
      return `
        <svg viewBox="0 0 64 64" aria-hidden="true">
          <defs>
            <linearGradient id="${gid}" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="${c1}" />
              <stop offset="1" stop-color="${c2}" />
            </linearGradient>
          </defs>
          <g>
            <path d="M32 34 C20 38, 10 30, 12 20 C14 10, 26 10, 32 20 Z" fill="url(#${gid})" opacity=".95"/>
            <path d="M32 34 C44 38, 54 30, 52 20 C50 10, 38 10, 32 20 Z" fill="url(#${gid})" opacity=".95"/>
            <path d="M32 34 C22 44, 12 44, 12 54 C12 62, 26 60, 32 50 Z" fill="url(#${gid})" opacity=".9"/>
            <path d="M32 34 C42 44, 52 44, 52 54 C52 62, 38 60, 32 50 Z" fill="url(#${gid})" opacity=".9"/>
            <rect x="30.2" y="19" width="3.6" height="33" rx="2" fill="rgba(74,22,48,.78)"/>
            <path d="M30 18 C26 14, 24 10, 26 8" stroke="rgba(74,22,48,.72)" stroke-width="2" fill="none" stroke-linecap="round"/>
            <path d="M34 18 C38 14, 40 10, 38 8" stroke="rgba(74,22,48,.72)" stroke-width="2" fill="none" stroke-linecap="round"/>
            <circle cx="23" cy="23" r="2.3" fill="rgba(255,255,255,.55)"/>
            <circle cx="41" cy="23" r="2.3" fill="rgba(255,255,255,.55)"/>
          </g>
        </svg>
      `;
    }

    const orbitBack  = document.getElementById("orbitBack");
    const orbitFront = document.getElementById("orbitFront");

    function buildOrbitLayer(targetEl, count, r1, r2, sizeMin, sizeMax){
      targetEl.innerHTML = "";
      for(let i=0;i<count;i++){
        const b = document.createElement("div");
        b.className = "butterfly";
        const ang = (360 / count) * i;
        const radius = (i % 2 === 0) ? r1 : r2;

        const c1 = (i % 2 === 0) ? "rgba(255,210,74,.98)" : "rgba(255,90,165,.98)";
        const c2 = (i % 2 === 0) ? "rgba(255,90,165,.86)" : "rgba(255,210,74,.86)";

        const bs = sizeMin + Math.random()*(sizeMax-sizeMin);
        b.style.setProperty("--bs", bs.toFixed(0) + "px");
        b.style.setProperty("--a", ang + "deg");
        b.style.setProperty("--r", radius + "px");
        b.style.setProperty("--tw", ((i%3)-1) * 10 + "deg");
        b.style.setProperty("--flap", (0.9 + (i%5)*0.12) + "s");

        const uid = Math.random().toString(16).slice(2);
        b.innerHTML = `<div class="wing">${butterflySVG(c1,c2,uid)}</div>`;
        targetEl.appendChild(b);
      }
    }

    function buildCardOrbit(){
      const isMobile = window.innerWidth < 640;
      const wrap = document.getElementById("cardWrap");
      const rect = wrap.getBoundingClientRect();
      const baseR = Math.max(rect.width, rect.height)/2 + (isMobile ? 58 : 78);

      orbitBack.style.setProperty("--ringDur", (isMobile ? 16 : 20) + "s");
      orbitFront.style.setProperty("--ringDur", (isMobile ? 14 : 18) + "s");

      buildOrbitLayer(orbitBack,  isMobile ? 8 : 10, baseR - 10, baseR + (isMobile ? 34 : 46), 26, 34);
      buildOrbitLayer(orbitFront, isMobile ? 10 : 12, baseR + (isMobile ? 22 : 34), baseR + (isMobile ? 60 : 82), 30, 40);
    }

    // ===== music toggle =====
    const bgm = document.getElementById("bgm");
    const musicBtn = document.getElementById("musicBtn");
    const musicLabel = document.getElementById("musicLabel");
    let musicOn = false;

    function setMusicUI(){ musicLabel.textContent = musicOn ? "Pause â¸ï¸" : "Play ðŸŽµ"; }
    function toggleMusic(){
      if(!musicOn){
        bgm.volume = 0.55;
        bgm.play().then(() => { musicOn = true; setMusicUI(); })
        .catch((e) => {
          musicOn = false; setMusicUI();
          alert("Gagal play.\nCek file lagu ada & path benar:\n" + (bgm.currentSrc || "./lagu1.mp3"));
          console.log("Play failed:", e);
        });
      }else{
        bgm.pause(); musicOn = false; setMusicUI();
      }
    }
    musicBtn.addEventListener("click", toggleMusic);
    setMusicUI();

    // ===== image missing toast =====
    const imgErr = document.getElementById("imgErr");
    document.querySelectorAll("#btsRing img").forEach(img=>{
      img.addEventListener("error", ()=>{
        imgErr.classList.add("show");
        imgErr.textContent = "GAGAL LOAD: " + img.getAttribute("src") + " (cek nama file & folder)";
      });
    });

    // init
    buildRoses();
    buildCardOrbit();
    window.addEventListener("resize", ()=>{ buildRoses(); buildCardOrbit(); });
  </script>
</body>
</html>
